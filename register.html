<!DOCTYPE html>
<html>

<head>
  <title>Register</title>
  <link href="css/register.css" rel="stylesheet" type="text/css">
  </link>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
</head>

<body>
  <div class="page">
    <!--Formen har fået et ID, der kan kaldes senere og den kalder et "Event" ved navn "regiData" når submit knappen bliver aktiveret-->
    <form action="" id="regiForm" onSubmit="regiData(event)">
      <div class="register">
        <h1>Register</h1>
        <p>Please fill in this form to create an account.</p>
        <hr>
        <div class="column">
          <label for="email"><b>Email</b></label>
          <div calss="space">
            <input type="email" placeholder="Enter Email" name="email" id="email" required>
          </div>
        </div>

          <div class="column">
            <label for="username"><b>Username</b></label>
              <div class="space">
                <input type="username" placeholder="Enter Username" name="uname" id="uname" required>
              </div>
          </div>
      
        <div class="column">
          <label for="password"><b>Password</b></label>
          <div class="space">
            <input type="password" placeholder="Enter Password" name="psw" id="psw" required>
          </div>
        </div>

        <div class="column">
          <label for="repeat password"><b>Repeat Password</b></label>
          <div class="space">
            <input type="password" placeholder="Repeat Password" name="psw-repeat" id="pswRep" required>
          </div>
        </div>

        <div class="used" id="inUse">
          <p>Username already in use</p>
        </div>
        <hr>

        <button type="submit" class="registerbtn">Register</button>
      </div>

      <div class="signin">
        <p>Already have an account? <a href="login.html">Sign in</a>.</p>
      </div>
    </form>
  </div>


  
  <script>

    //laver en connection til serverens IP
    var socket = io.connect('http://185.107.15.247:8080');


    //Laver en funktion, der kaldes når Når submit knappen trykkes på
      function regiData(event){
          event.preventDefault();
          var dataUname = document.getElementById('uname');
          var dataPass = document.getElementById('psw');
          var dataEmail = document.getElementById('email')
          console.log("Username: "+ dataUname.value);
          console.log("Password: " + dataPass.value);
          console.log("Email: " + dataEmail.value);

            dataRegi = {
                username: dataUname.value,
                password: dataPass.value,
                email: dataEmail.value
            }

          socket.emit("register", dataRegi);

          socket.on("regiSuccess", ()=>{
            window.location.replace("login.html")
          });

          socket.on("regiFail", ()=>{
            window.location.reload(true);
          });




      }
    
  </script>
</body>

</html>